(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){e.exports=n.p+"static/media/logo_white.d48bf04d.png"},121:function(e,t,n){e.exports=n(196)},126:function(e,t,n){},127:function(e,t,n){},164:function(e,t){},167:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=167},18:function(e,t){t.serverUrl="",t.socketUrl=""},186:function(e,t){},188:function(e,t){},196:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),l=(n(126),n(127),n(3)),i=n(8),u=n(6),s=n(13);function m(){var e=Object(a.useState)("Psychiatrist"),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),m=Object(l.a)(o,2),d=m[0],p=m[1];return r.a.createElement("div",{className:"patient-search-doctor"},r.a.createElement("h2",null,"Make an appointment"),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(u.a,null,r.a.createElement(u.a.Group,{controlId:"doctorSearchForm.doctorName"},r.a.createElement(u.a.Label,null,"Doctor Name:"),r.a.createElement(u.a.Control,{type:"text",placeholder:"E.g. Jane Doe",onChange:function(e){p(e.target.value)}})),r.a.createElement(u.a.Group,{controlId:"doctorSearchForm.selectSpecialization"},r.a.createElement(u.a.Label,null,"Doctor's Specialization"),r.a.createElement(u.a.Control,{as:"select",onChange:function(e){c(e.target.value)}},r.a.createElement("option",null,"Psychiatrist"),r.a.createElement("option",null,"Child Psychiatrist"),r.a.createElement("option",null,"Psychologist"),r.a.createElement("option",null,"Child Psychologist"),r.a.createElement("option",null,"Therapist"))),r.a.createElement(i.a,null,r.a.createElement(s.b,{params:{doctor:d,specialization:n},to:{pathname:"/patients/searchDoctor",state:{doctorName:d,specialization:n}}},"Search"))))}var d=n(28);function p(e){var t=new Date(e.appointment.sessionDetails.date);return r.a.createElement("tr",null,r.a.createElement("td",null," Dr. ",e.appointment.doctorDetails.name," "),r.a.createElement("td",null,"  ",e.appointment.doctorDetails.specialization," "),r.a.createElement("td",null," ",t.getDate(),"/",t.getMonth(),"/",t.getFullYear()," "),r.a.createElement("td",null," ",t.getHours(),":",t.getMinutes(),"  "),r.a.createElement("td",{className:"cancel-appointment-td"}," ",e.appointment.completed?"":r.a.createElement(i.a,{variant:"danger"},"Cancel Appointment")," "))}var f=n(11),E=n.n(f),h=n(16),b=n(18);function O(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/patient/appointments/".concat(e)).then((function(e){return e.json()})).then((function(e){n({type:"FETCH_PATIENT_APPOINTMENTS",payload:e})})).catch((function(e){alert("patient appointment error"+e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function v(){return function(){var e=Object(h.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"UNAUTHENTICATE_PATIENT"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var g=n(9);var j=Object(g.b)((function(e){return{patient:e.patient}}),{getPatientAppointments:O})((function(e){var t=e.patient.patientAppointments,n=[];return console.log(e),t.forEach((function(e){n.push(r.a.createElement(p,{key:e._id,appointment:e}))})),r.a.createElement("div",null,r.a.createElement("h4",null,"Your Current Appointments"),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Doctor"),r.a.createElement("th",null,"Specialization"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null))),r.a.createElement("tbody",null,n.map((function(e){return e})))))})),y=n(20),S=n(45),C=n(62);var N=Object(g.b)((function(e){return{patient:e.patient}}),{logPatientOut:v})((function(e){return r.a.createElement(S.a,{bg:"light",variant:"light"},r.a.createElement(S.a.Brand,{href:"#home",className:"navbar-logo-psyconnect"}," PsyconnectME - Patient "),r.a.createElement(C.a,{className:"mr-auto"}),r.a.createElement(i.a,{variant:"dark",onClick:function(){e.logPatientOut()}},"Sign Out"))}));var T=Object(g.b)((function(e){return{patient:e.patient}}),{patientAge:function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_AGE",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentSessionActive:function(e,t){return function(){var n=Object(h.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"PUT_PATIENT_IN_SESSION",payload:{username:e,authenticated:!0,currentAppointment:t,inSession:!0}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logPatientOut:v,getPatientAppointments:O})((function(e){var t,n=Object(a.useState)(null),c=Object(l.a)(n,2),o=c[0],u=c[1],d=Object(a.useState)(),p=Object(l.a)(d,2),f=p[0],E=p[1],h=!1,b=null,O=Object(a.useState)(null),v=Object(l.a)(O,2),g=v[0],S=v[1];Object(a.useEffect)((function(){e.getPatientAppointments(e.patient.patient_id),u(r.a.createElement(j,null));var t=T();E(t),D(),fetch("/patient/age/".concat(e.patient.patient_id)).then((function(e){return e.json()})).then((function(t){e.patientAge(t.age)}))}),[]);var C=function(){e.setCurrentSessionActive(e.patient.username,b)},T=function(){var n=e.patient.patientAppointments.slice().sort((function(e,t){return new Date(e.sessionDetails.date)-new Date(t.sessionDetails.date)}));if(!((n=n.filter((function(e){var t=new Date,n=new Date(e.sessionDetails.date);return n>=t||n.getFullYear()==t.getFullYear()&&n.getMonth()==t.getMonth()&&n.getDate()==t.getDate()&&t.getHours()-n.getHours()<=24}))).length>0))return"No upcoming appointments";t=new Date(n[0].sessionDetails.date);var a=new Date,r=a.getDate(),c=a.getMonth(),o=a.getFullYear();if(t.getFullYear()==o&&t.getMonth()==c&&t.getDate()==r){var l=t.getHours()-a.getHours();return h=l<1,b=l>=1?null:n[0]," Youra next appointment is in less than ".concat(l>1?l:1," hour(s) ")}var i=Math.floor((Date.parse(t)-Date.parse(new Date))/864e5);return"Your next appointment is in ".concat(i," day(s) ")},D=function(){h&&S(r.a.createElement(s.b,{to:"/room/"+b._id,className:"nav-link"},r.a.createElement(i.a,{variant:"success",onClick:C},"Call Doctor")))};return r.a.createElement(y.a,null,r.a.createElement(N,null),r.a.createElement("br",null),o||"No Appointments",r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("h3",null," ",f," "),g,r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement(m,null))})),D=n(27);var w=Object(g.b)((function(e){return{doctorDetails:e.doctor.doctorDetails}}),{logDoctorOut:function(){return function(){var e=Object(h.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"UNAUTHENTICATE_DOCTOR"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return r.a.createElement("div",null,r.a.createElement(S.a,{bg:"light",variant:"light"},r.a.createElement(S.a.Brand,{href:"#home",className:"navbar-logo-psyconnect"}," PsyconnectME - Dr. ",e.doctorDetails.name,"  "),r.a.createElement(C.a,{className:"mr-auto"}),r.a.createElement(i.a,{variant:"dark",onClick:e.logDoctorOut},"Sign Out")))}));function I(e){var t=new Date(e.session.date);return r.a.createElement("tr",null,r.a.createElement("td",null,e.session._id),r.a.createElement("td",null,e.session.date),r.a.createElement("td",null,t.getHours(),":",t.getMinutes()),r.a.createElement("td",null,e.patientsCount))}var _=Object(g.b)((function(e){return{doctorId:e.doctor.doctorDetails._id,appointments:e.appointments.items,sessions:e.session.sessions}}),{fetchDoctorSessions:function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("".concat(b.serverUrl,"/doctors/sessions/").concat(e)).then((function(e){return e.json()})).then((function(e){n({type:"FETCH_DOCTOR_SESSIONS",payload:e.sessionData})})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){e.fetchDoctorSessions(e.doctorId)}),[]);var t=[];return e.sessions&&(t=e.sessions.map((function(e){if(new Date(e.session.date)>=new Date)return r.a.createElement(I,{patientsCount:e.appointmentCount,session:e.session})}))),r.a.createElement(d.a,null,r.a.createElement("thead",null,r.a.createElement("th",null,"Session Id"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Starting Time"),r.a.createElement("th",null,"No. of Patients")),r.a.createElement("tbody",null,t.map((function(e){return e}))))}));function x(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("".concat(b.serverUrl,"/doctors/appointments/next/").concat(e)).then((function(e){return e.json()})).then((function(e){e.appointment=e.appointment.filter((function(e){return!e.completed})),n({type:"CLINIC_NEXT_PATIENT",payload:e})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var P=Object(g.b)((function(e){return{doctor:e.doctor,sessions:e.session}}),{})((function(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(),m=Object(l.a)(s,2),d=m[0],p=m[1],f=Object(a.useState)(25),E=Object(l.a)(f,2),h=E[0],O=E[1];return r.a.createElement("div",null,r.a.createElement("h3",null," Create a new session "),r.a.createElement(u.a,null,r.a.createElement(u.a.Group,{controlId:"sessionBuilder.DateSelect"},r.a.createElement(u.a.Label,null,"Date: "),r.a.createElement(u.a.Control,{onChange:function(e){return o(e.target.value)},type:"date"})),r.a.createElement(u.a.Group,{controlId:"sessionBuilder.ControlSelect2"},r.a.createElement(u.a.Label,null,"Time: "),r.a.createElement(u.a.Control,{onChange:function(e){return p(e.target.value)},type:"time",multiple:!0})),r.a.createElement(u.a.Group,{controlId:"sessionBuilder.ControlTextarea1"},r.a.createElement(u.a.Label,null,"Maximum number of patients:"),r.a.createElement(u.a.Control,{onChange:function(e){return O(e.target.value)},type:"number",placeholder:"25"})),r.a.createElement(i.a,{variant:"primary",onClick:function(){if(void 0!==c&&void 0!==d){e.sessions.sessions.forEach((function(e){var t=new Date(e.session.date),n="".concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate());c!=n||alert("There is already a session on that day")}));var t=new Date,n=new Date(c);if(t>n&&t.getDate()!=n.getDate()&&t.getMonth()!=n.getMonth()&&t.getFullYear()!=n.getFullYear())alert("The date has already passed");else{var a=Object(D.a)(d.match(/(\d{2}):(\d{2})/)),r=new Date(n.getFullYear(),n.getMonth(),n.getDate(),a[1],a[2]).toISOString();fetch("".concat(b.serverUrl,"/doctors/sessions/").concat(e.doctor.doctorDetails._id),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({dateTime:r,max_patients:h})}).then((function(e){return e.json()})).then((function(e){!0===e.success?alert("session added"):alert("Error creating session, check date and time")})).catch((function(e){alert("Error in creating session")}))}}else alert("Invalid Date or Time")}},"Create")))}));var k=Object(g.b)((function(e){return{doctor:e.doctor,sessions:e.session,clinic:e.clinic}}),{clinicNextPatient:x,setDoctorInSession:function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"START_DOCTOR_SESSION",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUserDoctor:function(e){return function(){var e=Object(h.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_USER_DOCTOR"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=!1,n=null,c=null,o=Object(a.useState)("No sessions today"),u=Object(l.a)(o,2),m=u[0],d=u[1],p=Object(a.useState)(null),f=Object(l.a)(p,2),E=(f[0],f[1]),h=Object(a.useState)(null),b=Object(l.a)(h,2),O=b[0],v=b[1];Object(a.useEffect)((function(){g(),C(),c&&(e.clinicNextPatient(c._id),j())}),[]);var g=function(){e.sessions.sessions.forEach((function(a){var r=(new Date).getDate(),o=new Date(a.session.date).getDate(),l=(new Date).getMonth(),i=new Date(a.session.date).getMonth(),u=(new Date).getTime(),s=new Date(a.session.date).getTime();o===r&&l==i&&(n=" ".concat(new Date(a.session.date).getHours(),":").concat(new Date(a.session.date).getMinutes()," "),t=!0,s<=u&&(c=a.session,e.setDoctorInSession(a.session)))}))},j=function(){fetch("/doctors/appointments/next/".concat(c._id)).then((function(e){return e.json()})).then((function(e){e.appointment=e.appointment.filter((function(e){return!e.completed}));var t=S(e.appointment);Object(D.a)(t),t.length>0&&v(r.a.createElement(s.b,{to:"/room/"+t[0]._id},r.a.createElement(i.a,{role:"doctor"},"ENTER CLINIC")))})).catch((function(e){console.log(e)}))},S=function(e){var t=e.filter((function(e){return!e.completed}));return t=t.sort((function(e,t){return e.patient_number>t.patient_number?1:t.patient_number>e.patient_number?-1:0}))},C=function(){t?(d("Session today at ".concat(n)),c&&E(r.a.createElement(i.a,{variant:"success",onClick:N}," ","Enter Session"))):d("No sessions today")},N=function(){e.clinicNextPatient(c._id)};return r.a.createElement(y.a,null,r.a.createElement(w,null),r.a.createElement("h3",null," Upcoming Sessions "),r.a.createElement(_,null),r.a.createElement("hr",null),r.a.createElement("h2",null," Sessions "),r.a.createElement("h3",null," ",m," "),r.a.createElement("hr",null),O,r.a.createElement("hr",null),r.a.createElement(P,null))})),A=n(43),R=n.n(A),M=n(12);function U(e){return r.a.createElement("video",{playsInline:!0,muted:!0,ref:e.stream,autoPlay:!0,style:{border:"1px solid blue",width:"50%",height:"50%"}})}function L(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null),c=Object(a.useRef)(),o=Object(a.useRef)(null),s=Object(a.useRef)(),m=Object(a.useRef)(null),p=Object(a.useState)({value:""}),f=Object(l.a)(p,2),E=f[0],h=f[1],b=Object(a.useState)({value:""}),O=Object(l.a)(b,2),v=O[0],g=O[1],j=Object(a.useRef)(),y=Object(a.useRef)(),S=Object(a.useRef)({}),C=Object(a.useRef)({}),N=Object(a.useState)(null),T=Object(l.a)(N,2),D=T[0],w=T[1],I=Object(a.useState)(null),_=Object(l.a)(I,2),x=_[0],P=_[1],k=Object(a.useState)([]),A=Object(l.a)(k,2),R=A[0],M=A[1],U=Object(a.useState)(null),L=Object(l.a)(U,2),B=L[0],H=L[1],F=Object(a.useState)(null),G=Object(l.a)(F,2),Y=G[0],z=G[1],J=Object(a.useState)([]),V=Object(l.a)(J,2),q=V[0],W=V[1],X=r.a.createElement(i.a,{variant:"warning",onClick:function(){me()}}," ","Confirm"," "),K=Object(a.useState)(X),$=Object(l.a)(K,2),Q=$[0],Z=$[1];Object(a.useEffect)((function(){ee(),te()}),[]);var ee=function(){fetch("/medicine/list").then((function(e){return e.json()})).then((function(e){P(le(e)),M(e)})).catch((function(e){console.log("Error fetching medicine data"+e)}))},te=function(){fetch("/conditions/list").then((function(e){return e.json()})).then((function(e){z(ie(e)),W(e)})).catch((function(e){console.log("Error fetching condition data"+e)}))};var ne=function(e){var t=!1;return q.forEach((function(n){n.name==e&&(t=!0)})),t},ae=function(e){var t=!1;return R.forEach((function(n){n.name==e&&(t=!0)})),t},re=function(e,t,n){S.current[t][n]=e.target.value},ce=function(e){delete S.current[e],w(ue())},oe=function(e){delete C.current[e],H(se())},le=function(e){return e.map((function(e){return r.a.createElement("a",{onClick:function(t){fe(t,e.index)}},e.name)}))},ie=function(e){return e.map((function(e){return r.a.createElement("a",{onClick:function(t){Ee(t,e.code)}},e.name)}))},ue=function(){return Object.keys(S.current).map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,S.current[e].name),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(t){re(t,e,"dosage")},placeholder:"0"})),r.a.createElement("td",null,r.a.createElement("select",{onChange:function(t){re(t,e,"beforeMeal")}},r.a.createElement("option",{value:"Before"},"Before"),r.a.createElement("option",{value:"After"},"After"))),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(t){re(t,e,"times")},type:"number"})),r.a.createElement("td",null,r.a.createElement(i.a,{variant:"danger",onClick:function(t){ce(e)}}," ","x"," ")))}))},se=function(){return Object.keys(C.current).map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,C.current[e].name),r.a.createElement("td",null,r.a.createElement(i.a,{variant:"danger",onClick:function(t){oe(e)}}," ","x"," ")))}))},me=function(){Z(r.a.createElement("h6",null," Prescription sent. ")),fetch("/medication/",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({prescription:S.current,date:(new Date).toISOString(),appointment_id:e.appointmentId,patient_id:e.patientId})}),fetch("/treatment_data/",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({medication:S.current,diagnosis:C.current,patient_age:e.appointment.patient_age})})},de=function(){"Add Medication"===m.current.innerText?(m.current.innerText="Cancel",m.current.style.backgroundColor="red"):(m.current.innerText="Add Medication",m.current.style.backgroundColor="#3e8e41")};function pe(e){var n,a,r;for(h({value:e.target.value}),n=E.value.toUpperCase(),a=t.current.getElementsByTagName("a"),r=0;r<a.length;r++){(a[r].textContent||a[r].innerText).toUpperCase().indexOf(n)>-1?a[r].style.display="":a[r].style.display="none"}}var fe=function(e,t){n.current.value=e.target.innerText,c.current=t},Ee=function(e,t){o.current.value=e.target.innerText,s.current=t};return r.a.createElement("div",null,r.a.createElement("div",{className:"searchMedicine"},r.a.createElement(u.a,null,r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{onClick:function(e){!function(e){e.preventDefault(),t.current.classList.toggle("show"),de()}(e)},className:"dropbtn",ref:m},"Add Medication"),r.a.createElement("div",{ref:t,className:"dropdown-content"},r.a.createElement("input",{type:"text",placeholder:"Medication Name",value:E.value,onChange:pe,className:"searchInput",ref:n,onKeyUp:pe}),x)),r.a.createElement(i.a,{variant:"primary",onClick:function(e){ae(n.current.value)&&(S.current[n.current.value]={name:n.current.value,dosage:0,times:0,beforeMeal:"Before",medication_index:c.current},w(ue()))}},"PRESCRIBE"))),r.a.createElement("div",{className:"prescriptionTable"},r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Medication"),r.a.createElement("th",null,"Dosage(mg)"),r.a.createElement("th",null,"Before/After Meals"),r.a.createElement("th",null,"Times/day "),r.a.createElement("th",null," "))),r.a.createElement("tbody",null,D))),r.a.createElement("div",{className:"conditionTable"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{onClick:function(e){j.current.classList.toggle("show"),"Add Condition"===y.current.innerText?(y.current.innerText="Cancel",y.current.style.backgroundColor="red"):(y.current.innerText="Add Condition",y.current.style.backgroundColor="#3e8e41")},className:"dropbtn",ref:y},"Add Condition"),r.a.createElement("div",{ref:j,className:"dropdown-content"},r.a.createElement("input",{type:"text",placeholder:"Medication Name",value:v.value,onChange:function(e){var t,n,a;for(g({value:e.target.value}),t=v.value.toUpperCase(),n=j.current.getElementsByTagName("a"),a=0;a<n.length;a++){(n[a].textContent||n[a].innerText).toUpperCase().indexOf(t)>-1?n[a].style.display="":n[a].style.display="none"}},className:"searchInput",ref:o}),Y)),r.a.createElement(i.a,{variant:"primary",onClick:function(e){ne(o.current.value)&&(C.current[o.current.value]={name:o.current.value,condition_code:s.current},H(se()))}},"DIAGNOSE"),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Condition"))),r.a.createElement("tbody",null,B))),r.a.createElement("div",null,Q))}var B=Object(g.b)((function(e){return{doctor:e.doctor,sessions:e.session,clinic:e.clinic}}),{clinicNextPatient:x})((function(e){var t,n=Object(M.f)(),c=Object(a.useState)({}),o=Object(l.a)(c,2),u=(o[0],o[1],Object(a.useState)()),s=Object(l.a)(u,2),m=s[0],d=s[1],p=Object(a.useState)(!1),f=Object(l.a)(p,2),E=f[0],h=(f[1],Object(a.useState)("")),b=Object(l.a)(h,2),O=(b[0],b[1],Object(a.useState)()),v=Object(l.a)(O,2),g=(v[0],v[1],Object(a.useState)(!1)),j=Object(l.a)(g,2),S=j[0],C=(j[1],Object(a.useRef)()),N=Object(a.useRef)(),T=e.clinic.items.appointment[0],D=T.session_id,w=T,I=Object(a.useState)(0),_=Object(l.a)(I,2),x=_[0],P=_[1],k=Object(a.useState)(null),A=Object(l.a)(k,2),B=A[0],H=A[1];function F(){fetch("/appointments/complete/".concat(T._id)).then((function(t){e.clinicNextPatient(D)})).catch((function(e){console.log("error completing appointment")})),B._id?n.push("/room/".concat(B._id)):(alert("No more patients online"),n.push("/doctor/"))}return Object(a.useEffect)((function(){N.current=R()("/"),P(e.clinic.items.appointment[0].patient_number),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){d(e),C.current&&(C.current.srcObject=e)})),N.current.emit("doctor joined",{session_id:D,appointments:e.clinic.items.appointment}),N.current.on("new next appointment",(function(e){console.log("new patient joined"),H(e)})),N.current.on("firstpatient",(function(e){F()})),N.current.on("nextPatient",(function(e){F(e.next_appointment,e.peer)})),N.current.on("patientToConnect",(function(e){alert("fn -- patient to connect"),F(e.appointment,e.peer)}))}),[]),m&&r.a.createElement(U,{stream:C}),S&&(t=r.a.createElement(U,{stream:t})),E&&r.a.createElement("div",null),r.a.createElement(y.a,null,r.a.createElement("h1",null," Dr.",e.doctor.name," Clinic "),r.a.createElement("h4",null,"Patient number : ",x),r.a.createElement("div",{className:"video-holder"},r.a.createElement("video",{className:"doctor-video",muted:!0,ref:e.yourVid,autoPlay:!0,playsInline:!0}),r.a.createElement("video",{className:"patient-video",ref:e.otherVid,autoPlay:!0,playsInline:!0})),r.a.createElement(L,{appointmentId:e.appointmentId,appointment:w,patientId:e.patientId}),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h5",null,"Connect to Next Patient"),r.a.createElement(i.a,{variant:"danger",onClick:F},"Next Patient")))})),H=n(75),F=n.n(H);var G=Object(g.b)((function(e){return{patient:e.patient}}),{})((function(e){var t,n=Object(a.useState)(""),c=Object(l.a)(n,2),o=(c[0],c[1],Object(a.useState)({})),u=Object(l.a)(o,2),s=(u[0],u[1],Object(a.useState)()),m=Object(l.a)(s,2),d=m[0],p=m[1],f=Object(a.useState)(!1),E=Object(l.a)(f,2),h=E[0],b=(E[1],Object(a.useState)("")),O=Object(l.a)(b,2),v=O[0],g=(O[1],Object(a.useState)()),j=Object(l.a)(g,2),S=(j[0],j[1],Object(a.useState)(!1)),C=Object(l.a)(S,2),N=(C[0],C[1],Object(a.useRef)()),T=(Object(a.useRef)(),Object(a.useRef)()),D=e.patient.currentAppointment.session_id,w=new F.a(e.patient.currentAppointment._id,{host:"/",port:"3001"});return Object(a.useRef)(),Object(a.useRef)(),w.on("open",(function(t){alert("dev -- opening patient peer"),T.current.emit("patientEnterClinic",{appointment:e.patient.currentAppointment,peer:null})})),Object(a.useEffect)((function(){T.current=R()("/"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){p(e),N.current&&(N.current.srcObject=e)})),T.current.emit("patient joined",{session_id:D,appointment:e.patient.currentAppointment}),T.current.on("requestPatientConnect",(function(t){t.appointment_id==e.patient.patientAppointments[0]._id&&T.current.emit("patientEnterClinic",{session_id:D,appointment_id:t.appointment_id})})),T.current.on("requestPeer",(function(t){alert("peer sent"),t.appointment._id==e.patient.currentAppointment._id&&T.current.emit("respondWithPeer",{peer:null,session_id:e.patient.currentAppointment.session_id})})),T.current.on("doctorIsIn",(function(e){}))}),[]),w.on("call",(function(e){e.answer(d),alert("The doctor is calling you")})),h&&(t=r.a.createElement("div",null,r.a.createElement("h1",null,v," is calling you"))),r.a.createElement(y.a,null,r.a.createElement("h1",null,"Clinic session - Session Id : ",D),r.a.createElement("h4",null,"Patient number : ",e.patient.currentAppointment.patient_number),r.a.createElement("h4",null,"appointment id : ",e.patient.currentAppointment._id),r.a.createElement("div",null,r.a.createElement("video",{muted:!0,ref:e.yourVid,autoPlay:!0,playsInline:!0}),r.a.createElement("video",{ref:e.otherVid,autoPlay:!0,playsInline:!0})),r.a.createElement("div",null,t),r.a.createElement("div",null,r.a.createElement(i.a,{variant:"danger"},"Leave Session")))})),Y=n(82);var z=Object(g.b)((function(e){return{patientId:e.patient.patient_id,age:e.patient.age}}),{})((function(e){console.log(e.age);var t={display:"flex",flexDirection:"row",justifyContent:"space-around"},n=e.sessions.map((function(n){var a=new Date(n.date),c=n.appointments>=n.patient_limit;return r.a.createElement("div",{style:t,key:n.id},r.a.createElement("div",null,a.getDate(),"/",a.getMonth()+1,"/",a.getFullYear()),r.a.createElement("div",null,a.getHours()>=10?a.getHours():"0"+a.getHours(),":",a.getMinutes()>=10?a.getMinutes():"0"+a.getMinutes()),r.a.createElement("div",null,n.appointments," / ",n.patient_limit," bookings"),r.a.createElement(i.a,{onClick:function(){!function(t){fetch("".concat(b.serverUrl,"/appointments/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t._id,patientId:e.patientId,age:e.age})}).then((function(e){return e.json()})).then((function(e){!0===e.success&&!0===e.available?alert("Session booked successfully"):!0===e.success&&!1===e.available?alert("All appointments booked"):alert("Error, recheck your dashbooard and try again")})).catch((function(e){alert("Error confirming session, recheck your dashboard and try again"+e)}))}(n)},variant:c?"danger":"success"},c?"Session Full":"Book Session"))}));return r.a.createElement("div",null,n.map((function(e){return e})))}));var J=Object(g.b)((function(e){return{age:e.patient.age}}),{})((function(e){Object(a.useEffect)((function(){p()}),[]);var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],o=n[1],i=[],u=[],s=e.location.state,m=s.doctorName,d=s.specialization,p=function(){fetch("".concat(b.serverUrl,"/doctors/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorName:m,specialization:d})}).then((function(e){return e.json()})).then((function(e){!0===e.success?(u=Object(D.a)(e.result),i=f(),o(i)):console.log("error occured")})).catch((function(e){console.log("Error fetching doctors"+e)}))},f=function(){return u.map((function(e){return r.a.createElement(Y.a,{key:e._id},r.a.createElement(Y.a.Body,null,"Dr. ",e.name,"|",e.specialization,"|",r.a.createElement("hr",null),r.a.createElement(z,{sessions:e.doctorSessions})))}))};return r.a.createElement(y.a,null,r.a.createElement(N,null),r.a.createElement("h3",null," Searching for Dr. ",m," (",d,") "),r.a.createElement("div",{id:"search-results-doctors"},c))}));n(168);function V(){return r.a.createElement("div",{className:"landing-div"},r.a.createElement("nav",{className:"navbar navbar-expand-lg landing-navbar"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",null,r.a.createElement(s.b,{to:"/patients",className:"nav-link"}," Patient Login")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/signup",className:"nav-link"},"Sign Up as a Patient")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/research",className:"nav-link nav-link-white"},"Research"))),r.a.createElement(i.a,{inline:!0},r.a.createElement(s.b,{to:"/doctor/login",className:"nav-link"},"Doctor Sign in"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"slogan-holder"},r.a.createElement("h1",null,'"We live in trying times..."'),r.a.createElement("h1",null,"... but a psychiatrist has never been more accessible")))}var q=n(19),W=Object(q.a)();var X={authenticatePatientLogin:function(e,t){return function(){var n=Object(h.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch("".concat(b.serverUrl,"/patient/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,password:t})}).then((function(e){return e.json()})).then((function(n){!0===n.userIsValid&&a({type:"AUTHENTICATE_PATIENT",payload:{username:e,password:t,authenticated:!0,patientDetails:n.patientDetails}})})).catch((function(e){console.log("Error in Patient Actions"+e)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},unauthenticatePatientLogin:function(){return{type:"UNAUTHENTICATE_PATIENT"}}},K=Object(g.b)((function(e){return{patient:e.patient}}),X)((function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(""),m=Object(l.a)(s,2),d=m[0],p=m[1];return!0===e.patient.authenticated&&(W.push("/patients/"),document.location.reload()),r.a.createElement(y.a,{className:"signup-form-container"},r.a.createElement("div",{className:"signup-form"},r.a.createElement(u.a,null,r.a.createElement(u.a.Group,{controlId:"formBasicEmail",onChange:function(e){o(e.target.value)}},r.a.createElement(u.a.Label,null,"Email address"),r.a.createElement(u.a.Control,{type:"email",placeholder:"Enter email"}),r.a.createElement(u.a.Text,{className:"text-muted"})),r.a.createElement(u.a.Group,{controlId:"formBasicPassword"},r.a.createElement(u.a.Label,null,"Password"),r.a.createElement(u.a.Control,{type:"password",placeholder:"Password",onChange:function(e){p(e.target.value)}})),r.a.createElement(i.a,{variant:"primary",onClick:function(){e.authenticatePatientLogin(c,d)}},"Submit"))))}));var $=Object(g.b)((function(e){return{doctor:e.doctor}}),{logDoctorIn:function(e,t){return function(){var n=Object(h.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch("".concat(b.serverUrl,"/doctors/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorId:e,password:t})}).then((function(e){return e.json()})).then((function(t){!0===t.userIsValid&&(a({type:"AUTHENTICATE_DOCTOR",payload:{username:e,authenticated:!0,doctorDetails:t.doctorDetails}}),a({type:"SET_USER_DOCTOR"}))})).catch((function(e){console.log(e)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(""),m=Object(l.a)(s,2),d=m[0],p=m[1];return!0===e.doctor.authenticated&&(W.push("/doctor/"),document.location.reload()),r.a.createElement(y.a,{className:"signup-form-container"},r.a.createElement("div",{className:"signup-form"},r.a.createElement(u.a,null,r.a.createElement(u.a.Group,{controlId:"formBasicEmail",onChange:function(e){o(e.target.value)}},r.a.createElement(u.a.Label,null,"Doctor Psyconnect ID"),r.a.createElement(u.a.Control,{type:"email",placeholder:"Enter email"}),r.a.createElement(u.a.Text,{className:"text-muted"})),r.a.createElement(u.a.Group,{controlId:"formBasicPassword"},r.a.createElement(u.a.Label,null,"Password"),r.a.createElement(u.a.Control,{type:"password",placeholder:"Password",onChange:function(e){p(e.target.value)}})),r.a.createElement(i.a,{variant:"primary",onClick:function(){e.logDoctorIn(c,d)}},"Log In"))))})),Q=n(22),Z=n(112),ee=n(10),te={userType:"guest"},ne={appointments:[]},ae=n(113),re={patient_id:null,username:"",authenticated:!1,inSession:!1,sessionId:null,patientAppointments:null},ce={username:"",authenticated:!1,inSession:!1,sessionId:null,doctorDetails:{}},oe={currentsessionId:null,currentPatientId:null},le={sessions:[]},ie=Object(Q.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DOCTOR":return Object(ee.a)(Object(ee.a)({},e),{},{userType:"doctor"});default:return e}},appointments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DOCTOR_APPOINTMENTS_TODAY":return Object(ee.a)(Object(ee.a)({},e),{},{items:t.payload});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DOCTOR_SESSIONS":return Object(ee.a)(Object(ee.a)({},e),{},{sessions:t.payload});default:return e}},patient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.LOCATION_CHANGE:case"AUTHENTICATE_PATIENT":return Object(ee.a)(Object(ee.a)({},e),{},{patient_id:t.payload.patientDetails._id,username:t.payload.username,authenticated:t.payload.authenticated,inSession:!1});case"UNAUTHENTICATE_PATIENT":return Object(ee.a)(Object(ee.a)({},e),{},{username:null,patient_id:"",authenticated:!1,inSession:!1});case"PUT_PATIENT_IN_SESSION":return Object(ee.a)(Object(ee.a)({},e),{},{username:t.payload.username,authenticated:t.payload.authenticated,inSession:!0,currentAppointment:t.payload.currentAppointment,sessionId:t.payload.currentAppointment.session_id});case"SET_AGE":return Object(ee.a)(Object(ee.a)({},e),{},{age:t.payload});case"FETCH_PATIENT_APPOINTMENTS":return Object(ee.a)(Object(ee.a)({},e),{},{patientAppointments:t.payload});default:return e}},doctor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATE_DOCTOR":return Object(ee.a)(Object(ee.a)({},e),{},{username:t.payload.username,authenticated:t.payload.authenticated,inSession:!1,doctorDetails:t.payload.doctorDetails});case"UNAUTHENTICATE_DOCTOR":return{username:"",authenticated:!1,inSession:!1,doctorDetails:{}};case"START_DOCTOR_SESSION":return Object(ee.a)(Object(ee.a)({},e),{},{currentSessionDetails:t.payload});case"END_DOCTOR_SESSION":return Object(ee.a)(Object(ee.a)({},e),{},{username:t.payload.username,authenticated:t.payload.authenticated,inSession:!1,doctorDetails:t.payload.doctorDetails});default:return e}},clinic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLINIC_NEXT_PATIENT":return Object(ee.a)(Object(ee.a)({},e),{},{items:t.payload});default:return e}}}),ue=n(81),se=n(114),me=n.n(se),de={},pe=[Z.a],fe={key:"root",storage:me.a},Ee=Object(ue.a)(fe,ie),he=n(64),be=Object(g.b)((function(e){return{patient:e.patient}}),null)((function(e){var t=e.component,n=Object(he.a)(e,["component"]);!0!==n.patient.authenticated&&(W.push("/patients/login"),document.location.reload());var r=function(){if(!0===n.patient.authenticated)return a.createElement(t,n)};return a.createElement(a.Fragment,null,a.createElement(M.a,{render:function(e){return a.createElement(a.Fragment,null,r())}}))})),Oe=Object(g.b)((function(e){return{auth:e.auth,doctor:e.doctor}}),null)((function(e){var t=e.component,n=Object(he.a)(e,["component"]);!0===n.doctor.authenticated&&"doctor"===n.auth.userType||(W.push("/doctor/login"),document.location.reload());var r=function(){if(!0===n.doctor.authenticated)return a.createElement(t,n)};return a.createElement(a.Fragment,null,a.createElement(M.a,{render:function(e){return a.createElement(a.Fragment,null,r())}}))})),ve=n(115),ge=n(79),je=n.n(ge),ye=Object(g.b)((function(e){return{auth:e.auth,clinic:e.clinic}}),{})((function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),c=(n[0],n[1]),o=Object(a.useRef)(),i=Object(a.useRef)(),u=Object(a.useRef)([]),s=e.match.params.roomID,m=Object(a.useRef)(),d=Object(a.useState)([]),p=Object(l.a)(d,2),f=(p[0],p[1],e.match.params.appointmentId),E=e.clinic.items.appointment[0].patient_id,h=e.clinic.items.appointment[0];return Object(a.useEffect)((function(){o.current=R.a.connect("/"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i.current.srcObject=e,o.current.emit("join room",s),o.current.on("all users",(function(t){var n=[];t.forEach((function(t){var a=function(e,t,n){console.log("creating peer");var a=new je.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},stream:n});return a.on("signal",(function(n){console.log("sending signal"),o.current.emit("sending signal",{userToSignal:e,callerID:t,signal:n})})),a.on("stream",(function(e){console.log("received stream"),m.current.srcObject=e})),a}(t,o.current.id,e);u.current.push({peerID:t,peer:a}),n.push(a)})),c(n)})),o.current.on("user joined",(function(t){if(!u.current.find((function(e){return e.peerID===t.callerID}))){console.log("user joined");var n=function(e,t,n){console.log("adding peer");var a=new je.a({initiator:!1,trickle:!1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},stream:n});return a.on("signal",(function(e){o.current.emit("returning signal",{signal:e,callerID:t})})),a.on("stream",(function(e){m.current.srcObject=e})),a.signal(e),a}(t.signal,t.callerID,e);u.current.push({peerID:t.callerID,peer:n}),c((function(e){return[].concat(Object(D.a)(e),[n])}))}})),o.current.on("receiving returned signal",(function(e){console.log("receiving returned signal"),u.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)}))}))}),[]),"doctor"===e.auth.userType?r.a.createElement(B,{yourVid:i,otherVid:m,appointment:h,appointmentId:f,patientId:E}):r.a.createElement(G,{yourVid:i,otherVid:m})}));var Se=Object(g.b)((function(e){return{auth:e.auth}}),{})((function(e){var t;return t="doctor"==e.auth.userType?r.a.createElement(B,null):r.a.createElement(G,null),r.a.createElement("div",null,alert("test"),t)})),Ce=n(198),Ne=n(73),Te=n(116),De=n.n(Te);function we(e){var t,n=Object(a.useRef)(null),c=Object(a.useRef)(null),o=(Object(a.useRef)(),Object(a.useRef)(null),Object(a.useRef)()),u=(Object(a.useRef)(null),Object(a.useRef)({})),s=Object(a.useState)({value:""}),m=Object(l.a)(s,2),p=m[0],f=m[1],E=Object(a.useState)({value:""}),h=Object(l.a)(E,2),b=h[0],O=(h[1],Object(a.useRef)({})),v=Object(a.useRef)({}),g=Object(a.useState)(null),j=Object(l.a)(g,2),y=j[0],S=j[1],C=Object(a.useState)(null),N=Object(l.a)(C,2),T=(N[0],N[1],Object(a.useState)([])),w=Object(l.a)(T,2),I=(w[0],w[1]),_=Object(a.useState)([]),x=Object(l.a)(_,2),P=x[0],k=x[1],A=Object(a.useState)(null),R=Object(l.a)(A,2),M=R[0],U=R[1],L=Object(a.useState)(null),B=Object(l.a)(L,2),H=B[0],F=B[1],G=Object(a.useRef)({}),Y=Object(a.useRef)({}),z=Object(a.useRef)(0);function J(){n.current.classList.toggle("show")}Object(a.useEffect)((function(){V(),q()}),[]);var V=function(){fetch("/medicine/list").then((function(e){return e.json()})).then((function(e){I(e),K(e),ee(e)})).catch((function(e){console.log("Error fetching medicine data"+e)}))},q=function(){fetch("/conditions/list").then((function(e){return e.json()})).then((function(e){U(W(e)),k(e),t=Object(D.a)(e)})).catch((function(e){console.log("Error fetching condition data"+e)}))},W=function(e){return e.map((function(e){return r.a.createElement("a",{onClick:function(t){ae(t,e.code),$(),J()}},e.name)}))},X=function(e){var t=[];return Object.keys(e).forEach((function(e,n){t.push([27,v.current[e].code])})),t},K=function(e){e.forEach((function(e){G.current[e.name]={index:e.index}}))},$=function(){Q(c.current.value)&&(v.current[c.current.value]={name:c.current.value,code:o.current},F(Z()))},Q=function(e){console.log(P);var n=!1;return t.forEach((function(t){t.name==e&&(n=!0)})),n},Z=function(){return Object.keys(v.current).map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,v.current[e].name),r.a.createElement("td",null,r.a.createElement(i.a,{variant:"danger",onClick:function(t){re(e)}}," ","x"," ")))}))},ee=function(e){e.forEach((function(e){u.current[e.index]={name:e.name}}))},te=function(e){Y.current={};var t=[];e.forEach((function(e){!Y.current[e]&&e>0&&e<100&&(Y.current[e]=u.current[e].name,t.push(e))})),O.current=Y.current,S(ne(t))},ne=function(e){return console.log(u.current),e.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,u.current[e].name))}))};var ae=function(e,t){c.current.value=e.target.innerText,o.current=t},re=function(e){delete v.current[e],F(Z())};return r.a.createElement("div",null,r.a.createElement("div",{className:"searchMedicine"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"number",placeholder:"Age",ref:z}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{onClick:function(e){J()},type:"text",placeholder:"Condition Name",value:b.value,onChange:function(e){var t,a,r;for(f({value:e.target.value}),t=p.value.toUpperCase(),a=n.current.getElementsByTagName("a"),r=0;r<a.length;r++){(a[r].textContent||a[r].innerText).toUpperCase().indexOf(t)>-1?a[r].style.display="":a[r].style.display="none"}},className:"searchInput",ref:c}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"dropdown researcher-predict-search"},r.a.createElement("div",{ref:n,className:"dropdown-content"},M))),r.a.createElement(i.a,{onClick:function(){console.log(v.current),console.log(X(v.current));fetch("https://cors-anywhere.herokuapp.com/https://ughmvqu74l.execute-api.us-east-2.amazonaws.com/psyconnectml",{method:"POST",body:JSON.stringify({data:X(v.current)}),headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0,authorizationToken:"allow"}}).then((function(e){return e.json()})).then((function(e){te(e)})).catch((function(e){alert("Incorrect name provided")}))}}," PREDICT MEDICATION "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"disclaimer",style:{color:"red"}},"Disclaimer: This is purely educational. None of this data meant is to be used as a substitute for consulting a real, licensed medical professional"),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," Condition Name"),r.a.createElement("th",null," "))),r.a.createElement("tbody",null,H)),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Medication Name"))),r.a.createElement("tbody",null,y)))}function Ie(e){var t,n=e.data,c=e.medList,o=(e.conList,Object(a.useState)(null)),i=Object(l.a)(o,2),u=i[0],s=i[1];n.length;return Object(a.useEffect)((function(){t=function(e){var t={};return e.forEach((function(e){t[e.medication_index]?t[e.medication_index].count+=1:t[e.medication_index]={count:1}})),t}(n),s(r.a.createElement("tbody",null,Object.keys(t).map((function(e,n){return r.a.createElement("tr",null,r.a.createElement("td",null,c[e].name),r.a.createElement("td",null,t[e].count))}))))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"conditions-cases"},r.a.createElement("h4",null," This condition has been treated with the following drugs "),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Medication"),r.a.createElement("th",null,"Number of patients treated"))),u)))}function _e(){var e=Object(a.useRef)(null),t=(Object(a.useRef)(null),Object(a.useRef)(),Object(a.useRef)(null)),n=Object(a.useRef)(),c=Object(a.useRef)({}),o=Object(a.useRef)({}),s=Object(a.useRef)({}),m=Object(a.useRef)({}),d=Object(a.useState)(null),p=Object(l.a)(d,2),f=(p[0],p[1],Object(a.useState)([])),E=Object(l.a)(f,2),h=(E[0],E[1]),b=Object(a.useState)(null),O=Object(l.a)(b,2),v=O[0],g=O[1],j=Object(a.useState)([]),S=Object(l.a)(j,2),C=(S[0],S[1]),N=Object(a.useState)({value:""}),T=Object(l.a)(N,2),D=T[0],w=T[1],I=Object(a.useState)(null),_=Object(l.a)(I,2),x=(_[0],_[1]),P=Object(a.useState)(null),k=Object(l.a)(P,2),A=k[0],R=k[1];Object(a.useRef)({});Object(a.useEffect)((function(){M(),B()}),[]);var M=function(){fetch("/medicine/list").then((function(e){return e.json()})).then((function(e){h(e),U(e),L(e)})).catch((function(e){console.log("Error fetching medicine data"+e)}))},U=function(e){e.forEach((function(e){o.current[e.name]={index:e.index}}))},L=function(e){e.forEach((function(e){c.current[e.index]={name:e.name}}))},B=function(){fetch("/conditions/list").then((function(e){return e.json()})).then((function(e){g(H(e)),C(e),e.forEach((function(e){m.current[e.name]={code:e.code}})),function(e){e.forEach((function(e){s.current[e.code]={name:e.name}}))}(e)})).catch((function(e){console.log("Error fetching condition data"+e)}))},H=function(e){return e.map((function(e){return r.a.createElement("a",{onClick:function(t){F(t,e.code)}},e.name)}))},F=function(e,a){t.current.value=e.target.innerText,n.current=a},G=function(e){fetch("/treatment_data/data/condition/"+m.current[e].code).then((function(e){return e.json()})).then((function(e){x(e),R(Y(e))})).catch((function(e){alert(e)}))},Y=function(e){return r.a.createElement(Ie,{data:e,conList:s.current,medList:c.current})};function z(t){var n,a,r;for(w({value:t.target.value}),n=D.value.toUpperCase(),a=e.current.getElementsByTagName("a"),r=0;r<a.length;r++){(a[r].textContent||a[r].innerText).toUpperCase().indexOf(n)>-1?a[r].style.display="":a[r].style.display="none"}}return r.a.createElement(y.a,{className:"researcher-search-page"},r.a.createElement("div",{className:"searchbar-researcher-medication"},r.a.createElement("div",{className:"searchMedicine"},r.a.createElement(u.a,null,r.a.createElement("div",{className:"dropdown"},r.a.createElement("input",{onClick:function(t){!function(t){t.preventDefault(),e.current.classList.toggle("show")}(t)},type:"text",placeholder:"Medical Condition Name",value:D.value,onChange:z,className:"searchInput medicine-search-input",ref:t,onKeyUp:z}),r.a.createElement("div",{ref:e,className:"dropdown-content"},v)),r.a.createElement(i.a,{variant:"primary",onClick:function(e){G(t.current.value)}},"Search"))),r.a.createElement("div",{className:"medicine-results"},A)))}function xe(e){var t,n=e.data,c=(e.medList,e.conList),o=Object(a.useState)(null),i=Object(l.a)(o,2),u=i[0],s=i[1];n.length;return Object(a.useEffect)((function(){t=function(e){var t={};return e.forEach((function(e){t[e.condition_code]?t[e.condition_code].count+=1:t[e.condition_code]={count:1}})),t}(n),s((console.log(t),console.log(c),r.a.createElement("tbody",null,Object.keys(t).map((function(e,n){return r.a.createElement("tr",null,r.a.createElement("td",null,c[e].name),r.a.createElement("td",null,t[e].count))})))))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"conditions-cases"},r.a.createElement("h4",null," This medicine is commonly used to treat the following "),r.a.createElement(d.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Condition"),r.a.createElement("th",null,"Number of patients treated"))),u)))}function Pe(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(),c=Object(a.useRef)({}),o=Object(a.useRef)({}),s=Object(a.useRef)({}),m=Object(a.useRef)({}),d=Object(a.useState)(null),p=Object(l.a)(d,2),f=p[0],E=p[1],h=Object(a.useState)([]),b=Object(l.a)(h,2),O=b[0],v=b[1],g=Object(a.useState)(null),j=Object(l.a)(g,2),S=(j[0],j[1],Object(a.useState)([])),C=Object(l.a)(S,2),N=(C[0],C[1]),T=Object(a.useState)({value:""}),D=Object(l.a)(T,2),w=D[0],I=D[1],_=Object(a.useState)(null),x=Object(l.a)(_,2),P=(x[0],x[1]),k=Object(a.useState)(null),A=Object(l.a)(k,2),R=A[0],M=A[1],U=Object(a.useRef)({});Object(a.useEffect)((function(){L(),F()}),[]);var L=function(){fetch("/medicine/list").then((function(e){return e.json()})).then((function(e){E(G(e)),v(e),B(e),H(e)})).catch((function(e){console.log("Error fetching medicine data"+e)}))},B=function(e){e.forEach((function(e){o.current[e.name]={index:e.index}}))},H=function(e){e.forEach((function(e){c.current[e.index]={name:e.name}}))},F=function(){fetch("/conditions/list").then((function(e){return e.json()})).then((function(e){N(e),e.forEach((function(e){m.current[e.name]={code:e.code}})),function(e){e.forEach((function(e){s.current[e.code]={name:e.name}}))}(e)})).catch((function(e){console.log("Error fetching condition data"+e)}))},G=function(e){return e.map((function(e){return r.a.createElement("a",{onClick:function(t){q(t,e.index)}},e.name)}))},Y=function(e){fetch("/treatment_data/data/"+o.current[e].index).then((function(e){return e.json()})).then((function(e){P(e),M(z(e))})).catch((function(e){alert(e)}))},z=function(e){return r.a.createElement(xe,{data:e,conList:s.current,medList:c.current})},J=function(e){var t=!1;return O.forEach((function(n){n.name==e&&(t=!0)})),t};function V(t){var n,a,r;for(I({value:t.target.value}),n=w.value.toUpperCase(),a=e.current.getElementsByTagName("a"),r=0;r<a.length;r++){(a[r].textContent||a[r].innerText).toUpperCase().indexOf(n)>-1?a[r].style.display="":a[r].style.display="none"}}var q=function(e,a){t.current.value=e.target.innerText,n.current=a};return r.a.createElement(y.a,{className:"researcher-search-page"},r.a.createElement("div",{className:"searchbar-researcher-medication"},r.a.createElement("div",{className:"searchMedicine"},r.a.createElement(u.a,null,r.a.createElement("div",{className:"dropdown"},r.a.createElement("input",{onClick:function(t){!function(t){t.preventDefault(),e.current.classList.toggle("show")}(t)},type:"text",placeholder:"Medication Name",value:w.value,onChange:V,className:"searchInput medicine-search-input",ref:t,onKeyUp:V}),r.a.createElement("div",{ref:e,className:"dropdown-content"},f)),r.a.createElement(i.a,{variant:"primary",onClick:function(e){J(t.current.value)&&(U.current[t.current.value]={name:t.current.value,dosage:0,times:0,beforeMeal:"Before",medication_index:n.current},Y(t.current.value))}},"Search"))),r.a.createElement("div",{className:"medicine-results"},R)))}function ke(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return r.a.createElement(Ce.a,{className:"researcher-dashboard-body"},r.a.createElement(Ne.a,{xs:3,className:"researcher-dashboard-sidebar"},r.a.createElement("img",{className:"side-nav-logo",src:De.a}),r.a.createElement("hr",null),r.a.createElement("hr",null),r.a.createElement("hr",null),r.a.createElement(i.a,{onClick:function(e){c(r.a.createElement(Pe,null))}},"Search Medication"),r.a.createElement("hr",null),r.a.createElement(i.a,{onClick:function(e){c(r.a.createElement(_e,null))}},"Search Mental Health Conditions"),r.a.createElement("hr",null),r.a.createElement(i.a,{onClick:function(e){c(r.a.createElement(we,null))}},"Medication Prediction")),r.a.createElement(Ne.a,{xs:7,className:"researcher-dashboard-container"},n))}var Ae=n(46);function Re(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1],m=function(){return o(!1)},d=Object(a.useRef)(),p=Object(a.useRef)(),f=Object(a.useRef)(),E=Object(a.useRef)(),h=Object(a.useRef)(),b=function(){return f.current.value===p.current.value};return r.a.createElement(y.a,{className:"signup-form-container"},r.a.createElement("div",{className:"signup-form"},r.a.createElement("h5",{className:"signup-form-heading"}," Sign up to access the Psyconnectme Patient platform "),r.a.createElement(u.a,null,r.a.createElement(u.a.Group,{controlId:"formBasicEmail"},r.a.createElement(u.a.Label,null,"Your Name *"),r.a.createElement(u.a.Control,{ref:h,required:!0,type:"text",placeholder:"Enter email"})),r.a.createElement(u.a.Group,{controlId:"formBasicEmail"},r.a.createElement(u.a.Label,null,"Email address*"),r.a.createElement(u.a.Control,{ref:E,required:!0,type:"email",placeholder:"Enter email"})),r.a.createElement(u.a.Group,{controlId:"sessionBuilder.DateSelect"},r.a.createElement(u.a.Label,null,"Date of Birth *: "),r.a.createElement(u.a.Control,{ref:d,required:!0,type:"date"})),r.a.createElement(u.a.Group,{controlId:"formBasicPassword"},r.a.createElement(u.a.Label,null,"Password*"),r.a.createElement(u.a.Control,{ref:f,type:"password",placeholder:"Password",required:!0})),r.a.createElement(u.a.Group,{controlId:"formBasicPasswordConfirm"},r.a.createElement(u.a.Label,null,"Confirm Password*"),r.a.createElement(u.a.Control,{ref:p,type:"password",placeholder:"Same password",required:!0})),r.a.createElement(i.a,{variant:"primary",type:"submit",onClick:function(e){if(e.preventDefault(),b()){var t=new Date(d.current.value).toISOString();fetch("/patient/",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:E.current.value,password:f.current.value,dob:t,name:h.current.value})}).then((function(e){return e.json()})).then((function(e){1==e.success?o(!0):alert("Error Signing up!")})).catch((function(e){alert(e)}))}else alert("Passwords must match!")}},"Submit"))),r.a.createElement(Ae.a,{show:c,onHide:m},r.a.createElement(Ae.a.Header,{closeButton:!0},r.a.createElement(Ae.a.Title,null,"Success")),r.a.createElement(Ae.a.Body,null,"You're signed up!, Press NEXT to go to the login page"),r.a.createElement(Ae.a.Footer,null,r.a.createElement(i.a,{variant:"secondary",onClick:m},"Close"),r.a.createElement(s.b,{to:"/patients/login"},r.a.createElement(i.a,{variant:"success",onClick:m},"NEXT")))))}var Me=function(){var e=function(){var e=Object(Q.e)(Ee,de,Object(Q.d)(Q.a.apply(void 0,pe)));return{store:e,persistor:Object(ue.b)(e)}}(),t=e.store,n=e.persistor;return r.a.createElement(g.a,{store:t},r.a.createElement(s.a,null,r.a.createElement(ve.a,{loading:null,persistor:n},r.a.createElement("div",{className:"app-div"},r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/",component:V}),r.a.createElement(M.a,{exact:!0,path:"/patients/login",component:K}),r.a.createElement(be,{exact:!0,path:"/patients",component:T}),r.a.createElement(be,{exact:!0,path:"/patients/searchDoctor",component:J}),r.a.createElement(be,{exact:!0,path:"/patients/clinic/:docId",component:G}),r.a.createElement(M.a,{exact:!0,path:"/doctor/login",component:$}),r.a.createElement(Oe,{exact:!0,path:"/doctor",component:k}),r.a.createElement(Oe,{exact:!0,path:"/doctor/clinic",component:B}),r.a.createElement(M.a,{path:"/signup",component:Re}),r.a.createElement(M.a,{path:"/research",component:ke}),r.a.createElement(M.a,{path:"/room/:appointmentId",component:ye}),r.a.createElement(M.a,{exact:!0,path:"/clinic/:appointmentId",component:Se}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,null,r.a.createElement(Me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.7b248b6a.chunk.js.map